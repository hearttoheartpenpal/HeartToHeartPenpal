<!doctype html>
<html lang="en" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Heart to Heart â€” Penpal Program</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700;800&display=swap" rel="stylesheet">

  <style>
    *{ box-sizing:border-box; }
    html, body{ height:100%; }
    body{
      margin:0;
      font-family:"Poppins", system-ui, -apple-system, Arial, sans-serif;
      background:#fdeaf1; /* blush */
      overflow-x:hidden;
    }
    img{ display:block; max-width:100%; height:auto; }

    /* ========== THEME (background only; NO font-color changes) ========== */
    html[data-theme="light"] body{ background:#fdeaf1; }
    html[data-theme="dark"] body{ background:#1e0f17; } /* deep blackish rose */

    /* ========== TOP LEFT THEME ICON ========== */
    .themeWrap{
      position:fixed;
      top:22px;
      left:22px;
      z-index:100;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:6px;
      user-select:none;
    }
    .themeBtn{
      border:none;
      background:transparent;
      padding:0;
      margin:0;
      cursor:pointer;
      appearance:none;
      -webkit-appearance:none;
    }
    .themeBtn img{
      width:86px; /* slightly bigger */
      height:auto;
      transition:transform .15s ease;
    }
    .themeBtn:hover img{ transform:translateY(-2px); }
    .themeLabel{
      font-weight:800;
      font-size:14px;
      opacity:.9;
      color:#111; /* stays same */
      background:rgba(255,255,255,.65);
      padding:4px 10px;
      border-radius:999px;
      backdrop-filter: blur(6px);
    }

    /* ========== MAIN LAYOUT (BOTTOM-HEAVY) ========== */
    .stage{
      min-height:100vh;
      display:flex;
      justify-content:center;
      align-items:flex-start;
      padding: 52px 16px 80px;
    }
    .layout{
      width:min(1200px, 94vw);
      position:relative;
      padding-top: 30px; /* airy top space like Canva */
    }

    /* Envelope (you liked this sizing) */
    .envelope{
      width: clamp(460px, 40vw, 660px);
      margin: 0 auto;
      position:relative;
      z-index:3;
    }

    /* ONE card only */
    .card{
      width: 78%;
      max-width: 1200px;
      margin: -120px auto 0;   /* overlap into envelope (starts ~halfway) */
      background:#fff;
      border-radius: 12px;
      box-shadow: 0 26px 70px rgba(0,0,0,.14);
      position:relative;
      z-index:2;
      padding: 130px 56px 92px; /* top padding accounts for overlap */
      text-align:center;
    }

    /* Title + subtitle (keep colors/sizing stable) */
    .title{
      margin:0;
      font-weight:800;
      color:#c40000;
      font-size: clamp(96px, 7.4vw, 134px);
      line-height:1.0;
    }
    .subtitle{
      margin-top:10px;
      font-weight:800;
      font-size: clamp(24px, 2.2vw, 34px);
      color:#111;
      opacity:.9;
    }

    /* Icons row (normalize sizes even if files differ) */
    .iconRow{
      margin-top: 46px;
      display:flex;
      justify-content:center;
      gap: clamp(70px, 7vw, 150px);
      flex-wrap:wrap;
    }
    .iconBtn{
      border:none;
      background:transparent;
      cursor:pointer;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:10px;
      padding:10px 12px;
      border-radius:18px;
      transition:transform .18s ease;
    }
    .iconBtn:hover{ transform: translateY(-5px); }

    /* Slightly bigger than games heart */
    .iconImg{
      height: 165px;  /* equal height; all match */
      width: auto;
      object-fit: contain;
    }
    .iconLabel{
      font-weight:800;
      font-size: 16px; /* smaller text */
      color:#111;
      opacity:.95;
    }

    /* ========== POPUP (above clicked icon) ========== */
    .pop{
      position:fixed; /* position relative to viewport for accuracy */
      z-index:200;
      width: min(460px, 90vw);
      background:#fff;
      border-radius:18px;
      box-shadow: 0 22px 65px rgba(0,0,0,.18);
      padding: 12px 12px 14px;
      display:none;
      color:#111;
    }
    .popTop{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }
    .popTitle{
      font-weight:800;
      font-size:16px;
    }
    .popX{
      border:none;
      background: rgba(0,0,0,.06);
      border-radius: 12px;
      padding: 6px 10px;
      cursor:pointer;
      font-weight:800;
    }
    .popBody{
      margin-top:10px;
      font-size:14px;
      line-height:1.45;
      opacity:.92;
    }
    .popArrow{
      position:absolute;
      bottom:-9px;
      width:16px;
      height:16px;
      background: inherit;
      transform: rotate(45deg);
    }

    /* ========== GAMES (FIXED BOTTOM-RIGHT OF WEBSITE) ========== */
    .gamesFixed{
      position:fixed;
      right: 26px;
      bottom: 22px;
      z-index:150;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:8px;
      user-select:none;
    }
    .gamesBtn{
      border:none;
      background:transparent;
      cursor:pointer;
      transition: transform .18s ease;
    }
    .gamesBtn:hover{ transform: translateY(-5px) scale(1.02); }
    .gamesBtn:active{ transform: translateY(-2px) scale(0.98); }

    .gamesImg{
      width: 140px; /* smaller than about/rules/contact */
      height:auto;
    }
    .gamesLabel{
      font-weight:800;
      font-size:16px; /* smaller text */
      color:#111;
      background:rgba(255,255,255,.65);
      padding:4px 10px;
      border-radius:999px;
      backdrop-filter: blur(6px);
    }

    /* ========== MODAL (games options) ========== */
    .overlay{
      position:fixed;
      inset:0;
      display:none;
      align-items:center;
      justify-content:center;
      padding:18px;
      background: rgba(0,0,0,.35);
      backdrop-filter: blur(6px);
      z-index:300;
    }
    .modal{
      width:min(620px, 92vw);
      background:#fff;
      border-radius:22px;
      box-shadow: 0 22px 70px rgba(0,0,0,.35);
      padding:14px;
      transform: translateY(8px);
      animation: popIn .18s ease forwards;
      color:#111;
    }
    @keyframes popIn{
      to{ transform: translateY(0); }
    }
    .modalTop{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding: 6px 6px 10px;
    }
    .modalTitle{ font-weight:800; }
    .modalX{
      border:none;
      background: rgba(0,0,0,.06);
      border-radius:12px;
      padding:6px 10px;
      cursor:pointer;
      font-weight:800;
    }
    .modalGrid{
      display:grid;
      gap:10px;
      padding: 6px;
    }
    .gameOpt{
      border-radius:16px;
      padding:12px 14px;
      font-weight:800;
      cursor:pointer;
      background: transparent;
      border: 1px solid rgba(0,0,0,.12);
      text-align:left;
    }
    .note{
      padding: 6px 10px 10px;
      opacity:.85;
      font-size:13px;
    }

    /* Responsive */
    @media (max-width: 980px){
      .card{
        width: 94vw;
        margin-top: -105px;
        padding: 120px 18px 100px;
      }
      .iconImg{ height: 140px; }
      .gamesImg{ width: 128px; }
      .themeBtn img{ width: 78px; }
    }
  </style>
</head>

<body>
  <!-- Theme toggle -->
  <div class="themeWrap">
    <button class="themeBtn" id="themeBtn" type="button" aria-label="Toggle theme">
      <img id="themeIcon" src="./assets/sun.png" alt="Theme icon">
    </button>
    <div class="themeLabel" id="themeLabel">Light</div>
  </div>

  <main class="stage">
    <div class="layout">
      <img class="envelope" src="./assets/envelope.png" alt="Envelope">

      <section class="card" aria-label="Heart to Heart home">
        <h1 class="title">Heart to Heart</h1>
        <div class="subtitle">â€”Penpal Programâ€”</div>

        <div class="iconRow">
          <button class="iconBtn" type="button" data-key="about">
            <img class="iconImg" src="./assets/about.png" alt="About">
            <div class="iconLabel">About</div>
          </button>

          <button class="iconBtn" type="button" data-key="rules">
            <img class="iconImg" src="./assets/rules.png" alt="Rules">
            <div class="iconLabel">Rules</div>
          </button>

          <button class="iconBtn" type="button" data-key="contact">
            <img class="iconImg" src="./assets/contact.png" alt="Contact">
            <div class="iconLabel">Contact</div>
          </button>
        </div>
      </section>
    </div>
  </main>

  <!-- Games fixed bottom-right of WEBSITE -->
  <div class="gamesFixed">
    <button class="gamesBtn" id="gamesBtn" type="button" aria-label="Games">
      <img class="gamesImg" src="./assets/games.png" alt="Games">
    </button>
    <div class="gamesLabel">Games</div>
  </div>

  <!-- About/Rules/Contact popup -->
  <div class="pop" id="pop" aria-hidden="true">
    <div class="popTop">
      <div class="popTitle" id="popTitle">Title</div>
      <button class="popX" id="popX" type="button" aria-label="Close">âœ•</button>
    </div>
    <div class="popBody" id="popBody"></div>
    <div class="popArrow" id="popArrow" aria-hidden="true"></div>
  </div>

  <!-- Games modal -->
  <div class="overlay" id="overlay" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-label="Games">
      <div class="modalTop">
        <div class="modalTitle">Games</div>
        <button class="modalX" id="modalX" type="button" aria-label="Close">âœ•</button>
      </div>

      <div class="modalGrid">
        <button class="gameOpt" type="button">Tic Tac Toe (next)</button>
        <button class="gameOpt" type="button">Rock Paper Scissors (next)</button>
        <button class="gameOpt" type="button">More soon ðŸ’—</button>
      </div>

      <div class="note">Weâ€™ll code the actual games after the layout is perfect.</div>
    </div>
  </div>

  <script>
    // ===== Theme toggle (background only; keep your font colors the same) =====
    const themeBtn = document.getElementById("themeBtn");
    const themeIcon = document.getElementById("themeIcon");
    const themeLabel = document.getElementById("themeLabel");

    function setTheme(theme){
      document.documentElement.setAttribute("data-theme", theme);
      themeIcon.src = theme === "dark" ? "./assets/moon.png" : "./assets/sun.png";
      themeLabel.textContent = theme === "dark" ? "Dark" : "Light";
      localStorage.setItem("h2h-theme", theme);
    }
    setTheme(localStorage.getItem("h2h-theme") || "light");

    themeBtn.addEventListener("click", () => {
      const cur = document.documentElement.getAttribute("data-theme") || "light";
      setTheme(cur === "light" ? "dark" : "light");
    });

    // ===== About/Rules/Contact popup (above clicked icon) =====
    const pop = document.getElementById("pop");
    const popTitle = document.getElementById("popTitle");
    const popBody = document.getElementById("popBody");
    const popX = document.getElementById("popX");
    const popArrow = document.getElementById("popArrow");

    const CONTENT = {
      about: {
        title: "About",
        html: "Heart to Heart connects high school students and nursing home residents through meaningful handwritten letters."
      },
      rules: {
        title: "Rules",
        html: "Be kind and respectful. No personal contact info. Keep letters appropriate and safe. Prompts can be provided."
      },
      contact: {
        title: "Contact",
        html: "Add your email and/or a sign-up form link here."
      }
    };

    function openPop(key, btnEl){
      const data = CONTENT[key];
      if(!data) return;

      popTitle.textContent = data.title;
      popBody.innerHTML = data.html;

      pop.style.display = "block";
      pop.setAttribute("aria-hidden", "false");

      // position above the clicked icon
      const b = btnEl.getBoundingClientRect();
      const p = pop.getBoundingClientRect();

      const centerX = b.left + b.width/2;
      let left = centerX - p.width/2;
      left = Math.max(12, Math.min(left, window.innerWidth - p.width - 12));

      const top = b.top - p.height - 14;
      const finalTop = Math.max(12, top);

      pop.style.left = `${left}px`;
      pop.style.top = `${finalTop}px`;

      // arrow points at the button center
      const arrowLeft = (centerX - left) - 8;
      popArrow.style.left = `${Math.max(18, Math.min(arrowLeft, p.width - 34))}px`;
    }

    function closePop(){
      pop.style.display = "none";
      pop.setAttribute("aria-hidden", "true");
    }

    document.querySelectorAll(".iconBtn").forEach(btn => {
      btn.addEventListener("click", () => openPop(btn.dataset.key, btn));
    });
    popX.addEventListener("click", closePop);

    document.addEventListener("click", (e) => {
      const onIcon = e.target.closest(".iconBtn");
      const onPop = e.target.closest("#pop");
      if(!onIcon && !onPop) closePop();
    });

    window.addEventListener("resize", closePop);

    // ===== Games modal =====
    const gamesBtn = document.getElementById("gamesBtn");
    const overlay = document.getElementById("overlay");
    const modalX = document.getElementById("modalX");

    function openGames(){
      overlay.style.display = "flex";
      overlay.setAttribute("aria-hidden", "false");
    }
    function closeGames(){
      overlay.style.display = "none";
      overlay.setAttribute("aria-hidden", "true");
    }

    gamesBtn.addEventListener("click", openGames);
    modalX.addEventListener("click", closeGames);
    overlay.addEventListener("click", (e) => { if(e.target === overlay) closeGames(); });
  </script>
</body>
</html>
